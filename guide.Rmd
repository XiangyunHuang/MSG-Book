# 导读 {#guide .unnumbered}

\markboth{导读}{}

### 内容结构 {-}

本书根据统计图形制作的需要，将所有内容分为三部分：

第\@ref(par:cases)部分（\@ref(cha:history)至\@ref(cha:data)章）侧重趣味性，介绍从古至今的一些统计图形案例。首先，在欣赏前人智慧的基础上，说明统计图形在社会生活的各个方面所能体现的价值；接着，简单介绍了一下本书作图使用的工具—— R 语言；然后，从数据的角度对各种统计图形给出一些应用实例。介绍案例的同时，提供了可供运行的源代码。

第\@ref(par:gallery)部分（\@ref(cha:gallery1)至\@ref(chap:principle)章）侧重知识性，集中介绍讲解现有的统计图形种类，如常见的条形图、直方图、箱线图、散点图等，此外还会引入若干较特殊和不太常见的图形种类和数据图示方法，并且配以相应的统计数据分析实例，深入说明统计图形的用法和含义。介绍图形的同时，提供了 R 基础作图和 **ggplot2** 作图两种解决方案的源代码。最后，总结分析了绘制统计图形的一些指导原则，以便让读者清楚区分统计图形运用的条件和场合。

第\@ref(par:systems)部分（\@ref(cha:elements)至\@ref(cha:system)章）侧重技术性，讲解 R 语言中的作图系统，包括基础函数、**ggplot2**、**lattice**、**rgl** 等多种作图系统，详细介绍了点、线、多边形、颜色和文本等图形元素的使用细节。本部分会给那些期望能自定义统计图形的读者提供方便的解决方案。

### 阅读方案 {-}

本书可以从任意章节开始读，各章节之间没有严格的逻辑依赖关系。不过，为了方便不同的读者，我们推荐三种阅读方案。

方案 1: 
: 对统计图形的解读感兴趣的读者，我们推荐优先阅读第一部分和第二部分。这些内容介绍了图形实例和统计分析。读者不妨在阅读的同时，考虑如何用自己熟悉的作图工具把这些图形作出来。如果读罢之后对我们推荐的作图方法产生了兴趣，可以再阅读其它重在技术性的章节。

方案 2:
: 熟悉或喜爱 R 语言的读者，我们推荐优先阅读第三部分，这样可以先对本书作图使用的 R 语言函数和附加包有个系统全面的了解；然后，再阅读其它章节，同时体会这些函数和附加包在各个案例中是如何使用的。

方案 3:
: R 语言的初学者，我们推荐优先阅读第二章，大体了解 R 语言的基本规则之后，再阅读第三部分深入学习，同时参考我们推荐的学习资料。最后，阅读第一部分其它章节和第二部分，同时将案例的代码在 R 中运行，来重现书中的图形，巩固此前学到的知识。

书中有若干例彩蛋，它们与统计学几乎没什么关系，仅供娱乐消遣，也可作为学习函数使用方法的参考。

### 本书体例 {-}

本书正文中的代码、函数名称、对象类名称和参数名称均以等宽正体表示，如 `inline R code`、 `function()`；R 程序包用粗体表示，如 **package**。

代码区以灰色背景显示， 并且用不同颜色分别标记函数、参数、数字、字符和注释[^comments]等部分；代码输出的文字部分则以等宽字体的“`## `”开头，例如：

[^comments]: 不会被执行的语句，为了增强程序的可读性而写的文字。

```{r, echo=TRUE}
library(MSG) # 加载本书配套的 R 包 MSG
data(PlantCounts) # 加载数据供下面的回归模型使用
fit = lm(counts ~ altitude, data = PlantCounts) # 运算
summary(fit)
```

### 可重复性 {-}

本书插图的源代码全部收录在笔者开发的 R 附加包 **MSG** [@MSG] 中，读者可以轻松地重现书中的插图。包的安装方式见 \@ref(sec:installation) 小节。安装完毕后，读者只需在 R 环境里加载 **MSG** 包，然后运行函数 \verb|msg("图的编号")|，就可以看到源代码和相应的图形输出。例如运行：

```{r, eval=FALSE, echo=TRUE}
library(MSG)
msg("4.1")
```
\noindent 就会作出图 4.1，并呈现作图源代码（见图 \@ref(fig:r-gui)）。注意：图的编号要放在一对引号（`"`或`'`）里。如果忘记了输入引号，那么得到的源代码和图形可能不是你想要得到的，如 `msg(4.10)` 将得到图 4.1 而非图 4.10。

有些图形需要额外的附加包支持，初次使用时需要读者自行安装。为了方便，读者可以运行 `msg("0")`，一次性安装本书示例代码中所有需要的附加包。

很多图形我们都给出了 R 基础作图和 **ggplot2** 作图两种解决方案，在这种情况下，\verb|msg("图的编号")|得到的一般是基础作图代码和图形。如果想得到 **ggplot2** 图形，只需在图形编号前面增加一个`2`就可以了，例如 `msg("24.1")`，可得到图 4.1 **ggplot2** 版本的图示和源代码。本书尽量选择 **ggplot2** 的输出图形作为插图。读者可以将呈现的源代码直接拷贝粘贴到 R 语言环境中，体会其使用方法。

如果将来因为某些附加包的升级导致本书中的代码失效，那么我们会及时更新 **MSG** 包中的示例代码，方便读者使用 `msg()` 函数获取最新的源代码和图形。

**MSG** 包的使用说明参见包的主页[^github-msg]。

[^github-msg]: <https://github.com/yihui/MSG>


### 联系我们 {-}

本书的[主页](https://msg2020.pzhao.org)上提供了所有与本书有关的信息，包括作者的联系方式、书稿源代码链接、勘误表等。读者可以扫描图 \@ref(fig:msg2020-qr) 的二维码访问。

(ref:msg2020-qr) 《现代统计图形》主页地址的二维码

```{r msg2020-qr, out.width="30%", fig.cap="(ref:msg2020-qr)"}
knitr::include_graphics("images/msg2020-qr.png")
```
